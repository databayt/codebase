{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "ai-prompt-input",
  "description": "AI-powered prompt input component with suggestions and completions",
  "type": "registry:atom",
  "registryDependencies": [
    "button",
    "textarea"
  ],
  "files": [
    {
      "path": "components/atom/ai/ai-prompt-input.tsx",
      "content": "'use client';\n\nimport { useState, useRef, useEffect } from 'react';\nimport { Send, Sparkles, X } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Badge } from '@/components/ui/badge';\nimport { Card } from '@/components/ui/card';\nimport { cn } from '@/lib/utils';\n\ninterface AiPromptInputProps {\n  onSubmit: (prompt: string) => void | Promise<void>;\n  placeholder?: string;\n  suggestions?: string[];\n  templates?: { label: string; prompt: string }[];\n  maxLength?: number;\n  disabled?: boolean;\n  loading?: boolean;\n  className?: string;\n  showModelSelector?: boolean;\n  model?: string;\n  onModelChange?: (model: string) => void;\n}\n\nexport function AiPromptInput({\n  onSubmit,\n  placeholder = 'Enter your prompt...',\n  suggestions = [],\n  templates = [],\n  maxLength = 2000,\n  disabled = false,\n  loading = false,\n  className,\n  showModelSelector = false,\n  model,\n  onModelChange\n}: AiPromptInputProps) {\n  const [prompt, setPrompt] = useState('');\n  const [showSuggestions, setShowSuggestions] = useState(false);\n  const [showTemplates, setShowTemplates] = useState(false);\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n\n  // Auto-resize textarea\n  useEffect(() => {\n    if (textareaRef.current) {\n      textareaRef.current.style.height = 'auto';\n      textareaRef.current.style.height = `${textareaRef.current.scrollHeight}px`;\n    }\n  }, [prompt]);\n\n  const handleSubmit = async (e?: React.FormEvent) => {\n    e?.preventDefault();\n    if (!prompt.trim() || loading || disabled) return;\n\n    await onSubmit(prompt);\n    setPrompt('');\n    setShowSuggestions(false);\n  };\n\n  const handleSuggestionClick = (suggestion: string) => {\n    setPrompt(suggestion);\n    setShowSuggestions(false);\n    textareaRef.current?.focus();\n  };\n\n  const handleTemplateClick = (template: string) => {\n    setPrompt(template);\n    setShowTemplates(false);\n    textareaRef.current?.focus();\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSubmit();\n    }\n  };\n\n  return (\n    <div className={cn('relative w-full space-y-2', className)}>\n      {/* Templates */}\n      {templates.length > 0 && (\n        <div className=\"flex items-center gap-2\">\n          <Button\n            type=\"button\"\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={() => setShowTemplates(!showTemplates)}\n            className=\"text-xs\"\n          >\n            <Sparkles className=\"h-3 w-3 mr-1\" />\n            Templates\n          </Button>\n        </div>\n      )}\n\n      {showTemplates && templates.length > 0 && (\n        <Card className=\"absolute bottom-full mb-2 w-full p-2 z-10 max-h-48 overflow-y-auto\">\n          <div className=\"space-y-1\">\n            {templates.map((template, i) => (\n              <button\n                key={i}\n                onClick={() => handleTemplateClick(template.prompt)}\n                className=\"w-full text-left p-2 rounded hover:bg-muted transition-colors text-sm\"\n              >\n                <div className=\"font-medium\">{template.label}</div>\n                <div className=\"text-muted-foreground text-xs truncate\">\n                  {template.prompt}\n                </div>\n              </button>\n            ))}\n          </div>\n        </Card>\n      )}\n\n      {/* Main Input Area */}\n      <form onSubmit={handleSubmit} className=\"relative\">\n        <Textarea\n          ref={textareaRef}\n          value={prompt}\n          onChange={(e) => setPrompt(e.target.value)}\n          onFocus={() => suggestions.length > 0 && setShowSuggestions(true)}\n          onKeyDown={handleKeyDown}\n          placeholder={placeholder}\n          maxLength={maxLength}\n          disabled={disabled || loading}\n          className={cn(\n            'min-h-[80px] pr-12 resize-none',\n            'focus:ring-2 focus:ring-primary/20',\n            loading && 'opacity-50'\n          )}\n        />\n\n        {/* Character count */}\n        {maxLength && (\n          <div className=\"absolute bottom-2 left-2 text-xs text-muted-foreground\">\n            {prompt.length}/{maxLength}\n          </div>\n        )}\n\n        {/* Submit button */}\n        <Button\n          type=\"submit\"\n          size=\"icon\"\n          disabled={!prompt.trim() || loading || disabled}\n          className=\"absolute bottom-2 right-2 h-8 w-8\"\n        >\n          {loading ? (\n            <div className=\"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full\" />\n          ) : (\n            <Send className=\"h-4 w-4\" />\n          )}\n        </Button>\n      </form>\n\n      {/* Suggestions */}\n      {showSuggestions && suggestions.length > 0 && (\n        <Card className=\"absolute top-full mt-2 w-full p-2 z-10\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <span className=\"text-xs font-medium text-muted-foreground\">\n              Suggestions\n            </span>\n            <Button\n              type=\"button\"\n              variant=\"ghost\"\n              size=\"icon\"\n              className=\"h-4 w-4\"\n              onClick={() => setShowSuggestions(false)}\n            >\n              <X className=\"h-3 w-3\" />\n            </Button>\n          </div>\n          <div className=\"flex flex-wrap gap-2\">\n            {suggestions.map((suggestion, i) => (\n              <Badge\n                key={i}\n                variant=\"secondary\"\n                className=\"cursor-pointer hover:bg-secondary/80 transition-colors\"\n                onClick={() => handleSuggestionClick(suggestion)}\n              >\n                {suggestion}\n              </Badge>\n            ))}\n          </div>\n        </Card>\n      )}\n\n      {/* Model indicator */}\n      {showModelSelector && model && (\n        <div className=\"flex items-center justify-between text-xs text-muted-foreground\">\n          <span>Model: {model}</span>\n        </div>\n      )}\n    </div>\n  );\n}",
      "type": "registry:component",
      "target": "components/ai/ai-prompt-input.tsx"
    }
  ],
  "categories": [
    "ai",
    "form"
  ]
}