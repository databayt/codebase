{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "response",
  "description": "Response container with formatting and actions",
  "type": "registry:atom",
  "files": [
    {
      "path": "components/atom/response.tsx",
      "content": "'use client';\n\nimport { cn } from '@/lib/utils';\nimport { type ComponentProps, memo, useEffect, useState, useRef } from 'react';\nimport { Streamdown } from 'streamdown';\nimport remarkGfm from 'remark-gfm';\nimport remarkMath from 'remark-math';\nimport rehypeKatex from 'rehype-katex';\nimport { CheckCircle2, AlertCircle, XCircle, Loader2 } from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\n\ntype ResponseStatus = 'streaming' | 'done' | 'failed' | 'rejected' | null;\n\ntype ResponseProps = ComponentProps<typeof Streamdown> & {\n  status?: ResponseStatus;\n  onStatusChange?: (status: ResponseStatus) => void;\n  streamDelay?: number; // Milliseconds between characters for streaming effect\n};\n\nexport const Response = memo(\n  ({\n    className,\n    children,\n    parseIncompleteMarkdown = true,\n    allowedImagePrefixes = ['*'],\n    allowedLinkPrefixes = ['*'],\n    remarkPlugins = [remarkGfm, remarkMath],\n    rehypePlugins = [rehypeKatex],\n    status = null,\n    onStatusChange,\n    streamDelay = 10, // Default 10ms between characters\n    ...props\n  }: ResponseProps) => {\n    const [displayedContent, setDisplayedContent] = useState('');\n    const [currentStatus, setCurrentStatus] = useState<ResponseStatus>(status);\n    const { toast } = useToast();\n    const content = String(children || '');\n    const containerRef = useRef<HTMLDivElement>(null);\n\n    // Simulate streaming effect\n    useEffect(() => {\n      if (!content) {\n        setDisplayedContent('');\n        return;\n      }\n\n      // If we have full content and status is not streaming, show it all\n      if (status !== 'streaming') {\n        setDisplayedContent(content);\n        return;\n      }\n\n      // Streaming simulation - letter by letter\n      let currentIndex = 0;\n      setDisplayedContent('');\n      setCurrentStatus('streaming');\n\n      const streamInterval = setInterval(() => {\n        if (currentIndex < content.length) {\n          // Add one character at a time for true letter-by-letter effect\n          setDisplayedContent(prev => prev + content.charAt(currentIndex));\n          currentIndex++;\n        } else {\n          clearInterval(streamInterval);\n          setCurrentStatus('done');\n          onStatusChange?.('done');\n\n          // Show success notification\n          toast({\n            title: 'Response Complete',\n            description: 'AI has finished generating the response',\n            duration: 2000,\n          });\n        }\n      }, streamDelay);\n\n      return () => clearInterval(streamInterval);\n    }, [content, status, streamDelay, onStatusChange, toast]);\n\n    // Auto-scroll effect - scroll whenever displayedContent changes\n    useEffect(() => {\n      // Find the response container by ID or class\n      const scrollContainer = document.getElementById('ai-response-container') ||\n                               document.querySelector('.overflow-y-auto');\n\n      if (scrollContainer && currentStatus === 'streaming') {\n        // Smooth scroll to bottom\n        scrollContainer.scrollTo({\n          top: scrollContainer.scrollHeight,\n          behavior: 'smooth'\n        });\n      }\n    }, [displayedContent, currentStatus]);\n\n    // Update status from props\n    useEffect(() => {\n      if (status && status !== currentStatus) {\n        setCurrentStatus(status);\n\n        // Show status notifications\n        if (status === 'done') {\n          toast({\n            title: 'Success',\n            description: 'Response generated successfully',\n            duration: 2000,\n          });\n        } else if (status === 'failed') {\n          toast({\n            title: 'Failed',\n            description: 'Failed to generate response',\n            variant: 'destructive',\n            duration: 3000,\n          });\n        } else if (status === 'rejected') {\n          toast({\n            title: 'Rejected',\n            description: 'Response was rejected',\n            variant: 'destructive',\n            duration: 3000,\n          });\n        }\n      }\n    }, [status, currentStatus, toast]);\n\n    return (\n      <div className=\"relative\" ref={containerRef}>\n        {/* Status indicator */}\n        {currentStatus && (\n          <div className=\"absolute -top-2 -right-2 z-10\">\n            {currentStatus === 'streaming' && (\n              <div className=\"flex items-center gap-1 text-xs text-primary animate-pulse\">\n                <Loader2 className=\"h-3 w-3 animate-spin\" />\n                <span>Generating...</span>\n              </div>\n            )}\n            {currentStatus === 'done' && (\n              <div className=\"flex items-center gap-1 text-xs text-green-600\">\n                <CheckCircle2 className=\"h-3 w-3\" />\n                <span>Complete</span>\n              </div>\n            )}\n            {currentStatus === 'failed' && (\n              <div className=\"flex items-center gap-1 text-xs text-destructive\">\n                <XCircle className=\"h-3 w-3\" />\n                <span>Failed</span>\n              </div>\n            )}\n            {currentStatus === 'rejected' && (\n              <div className=\"flex items-center gap-1 text-xs text-orange-600\">\n                <AlertCircle className=\"h-3 w-3\" />\n                <span>Rejected</span>\n              </div>\n            )}\n          </div>\n        )}\n\n        <Streamdown\n          className={cn(\n            'size-full [&>*:first-child]:mt-0 [&>*:last-child]:mb-0',\n            'prose prose-sm max-w-none dark:prose-invert',\n            'prose-headings:font-semibold prose-h1:text-2xl prose-h2:text-xl prose-h3:text-lg',\n            'prose-p:leading-relaxed prose-p:text-muted-foreground',\n            'prose-strong:text-foreground prose-strong:font-semibold',\n            'prose-code:text-xs prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded-md',\n            'prose-code:bg-muted prose-code:text-foreground prose-code:font-mono',\n            'prose-pre:bg-muted prose-pre:text-foreground prose-pre:rounded-lg',\n            'prose-blockquote:border-l-primary prose-blockquote:text-muted-foreground',\n            'prose-ul:list-disc prose-ol:list-decimal',\n            'prose-li:text-muted-foreground prose-li:marker:text-primary',\n            'prose-a:text-primary prose-a:no-underline hover:prose-a:underline',\n            'text-left', // Ensure text is aligned to start\n            className,\n          )}\n          parseIncompleteMarkdown={parseIncompleteMarkdown}\n          allowedImagePrefixes={allowedImagePrefixes}\n          allowedLinkPrefixes={allowedLinkPrefixes}\n          remarkPlugins={remarkPlugins}\n          rehypePlugins={rehypePlugins}\n          {...props}\n        >\n          {displayedContent}\n        </Streamdown>\n      </div>\n    );\n  },\n  (prevProps, nextProps) =>\n    prevProps.children === nextProps.children &&\n    prevProps.status === nextProps.status\n);\n\nResponse.displayName = 'Response';",
      "type": "registry:component",
      "target": "components/response.tsx"
    }
  ],
  "categories": [
    "ai",
    "display"
  ]
}