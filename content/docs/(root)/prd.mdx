---
title: PRD
description: Product Requirements Document for Hogwarts School Automation Platform
---

# PRD - Product Requirements Document

**Version:** 1.0 | **Date:** January 2024

## TL;DR

SaaS B2B multi-tenant school management system. Next.js 15 + React 19 + TypeScript + Prisma + PostgreSQL. 200+ functional requirements across 12 epics. FERPA/GDPR compliant. Arabic-first with RTL support.

---

## Technical Overview

**Stack:**
- Frontend: Next.js 15.5.3 (App Router, Turbopack), React 19, TypeScript
- Backend: Next.js API Routes, Edge Runtime compatible
- Database: PostgreSQL + Prisma 6 (library engine)
- Auth: NextAuth v5 (OAuth + credentials + 2FA)
- Styling: Tailwind CSS v4, shadcn/ui components
- i18n: Custom implementation (en, ar with RTL)

**Architecture:**
- Multi-tenant (subdomain-based): `school.domain.com` → `/[lang]/s/school/...`
- Every model has `schoolId` - strict data isolation
- RBAC: 8 roles (Developer, Admin, Teacher, Student, Guardian, Accountant, Staff, User)
- Stateless serverless functions (Vercel)

---

## Multi-Tenancy Pattern

**Critical Security Rule:**
```typescript
// ❌ NEVER do this
await prisma.student.findMany()

// ✅ ALWAYS scope by schoolId
await prisma.student.findMany({
  where: { schoolId }
})
```

**Data Isolation:**
- `@@unique([schoolId, email])` on all models
- Automated tests verify no cross-tenant leaks
- Audit trails: `schoolId` + `requestId` + `userId` + `timestamp`

---

## Core Features (MVP)

### Authentication & Users (FR-001 to FR-020)
- Email/password + OAuth (Google, GitHub, Facebook)
- 2FA (TOTP), password reset, email verification
- Role-based access control (8 roles)
- Session management (JWT, 24h expiry)

### Student Management (FR-021 to FR-040)
- Enrollment, profiles, health records, achievements
- Guardian links, class enrollment, status transitions
- Document upload, photo management
- Batch operations, CSV import/export

### Teacher & Staff (FR-041 to FR-060)
- Profile, qualifications, departments, workload
- Class assignments, timetable, leave management
- Communication with guardians

### Classes & Subjects (FR-061 to FR-080)
- Subject/class creation, student/teacher assignment
- Timetable builder, capacity limits, sections
- Gradebook, attendance sheet, resources

### Attendance (FR-081 to FR-100)
- Daily + period-wise marking
- Status types: Present, Absent, Late, Excused
- QR code check-in, bulk operations
- Reporting (student/class/school level)

### Additional (TBD)
- Assessment & Grading (FR-101 to FR-130)
- Fee Management (FR-131 to FR-160)
- Finance Module (FR-161 to FR-200)
- Communication (FR-201 to FR-230)
- Analytics (FR-231 to FR-260)
- Admin Settings (FR-261 to FR-300)

---

## Non-Functional Requirements

### Performance
- Page load: &lt;2s initial (3G), &lt;500ms cached
- API response: p95 &lt;500ms, p99 &lt;1s
- Database: No N+1 queries, &lt;100ms for 95%
- Support 10K concurrent users/school

### Security
- Encryption: AES-256 (rest), TLS 1.3 (transit)
- Auth: Bcrypt (cost 12), JWT (24h), 2FA, rate limiting
- Validation: Zod (server), Prisma (SQL injection prevention)
- Headers: CSP, HSTS, X-Frame-Options, X-Content-Type-Options
- Audit: 7-year retention, immutable logs

### Scalability
- Prisma connection pool (max 100)
- Neon Serverless PostgreSQL (auto-scale)
- Vercel serverless functions (1000s instances)
- Edge caching, CDN for files (Cloudflare R2)

### Accessibility
- WCAG 2.1 AA compliant
- Keyboard navigation, screen reader support
- Color contrast ≥4.5:1, 200% zoom support
- Semantic HTML, ARIA labels

### Compliance
- FERPA (US student privacy)
- GDPR (EU data protection, right to be forgotten)
- COPPA (parental consent &lt;13 years)
- WCAG 2.1 AA (accessibility)

---

## API & Integrations

**RESTful API v1:**
- OpenAPI 3.0 spec
- API key auth + rate limiting (100-unlimited req/hr by tier)
- Webhooks: `student.enrolled`, `payment.received`, `grade.updated`

**SSO:**
- SAML 2.0 (Okta, Azure AD, OneLogin)
- OAuth 2.0 (Google Workspace, Microsoft 365)
- SCIM (user provisioning)

**Integrations:**
- Google Workspace, Microsoft 365, Zoom
- Stripe (payments), Twilio (SMS), Resend (email)
- QuickBooks/Xero (accounting)

---

## Subscription Tiers

| Tier | Price | Limits |
|------|-------|--------|
| FREE | $0 | 100 students, 1GB storage, community support |
| PRO | $1.50/student/month | 10GB, priority support, custom branding, API 1K req/hr |
| ENTERPRISE | $1.00/student/month | Unlimited storage/API, white-label, SLA 99.9%, SSO |

---

## Implementation Epics

1. **Foundation & Auth** (FR-001 to FR-020)
2. **School Config** (year levels, departments)
3. **Student Management** (FR-021 to FR-040)
4. **Teacher & Staff** (FR-041 to FR-060)
5. **Classes & Subjects** (FR-061 to FR-080)
6. **Attendance** (FR-081 to FR-100)
7. **Assessment** (FR-101 to FR-130) - TBD
8. **Fees** (FR-131 to FR-160) - TBD
9. **Finance** (FR-161 to FR-200) - TBD
10. **Communication** (FR-201 to FR-230) - TBD
11. **Analytics** (FR-231 to FR-260) - TBD
12. **Admin** (FR-261 to FR-300) - TBD

See [Epic Breakdown](/docs/epics) for detailed stories.

---

## Design System

**Typography:**
- Arabic: Tajawal
- English: Inter
- Use semantic HTML (`<h1>-<h6>`, `<p>`)
- NO hardcoded `text-*` or `font-*` classes

**Colors (OKLCH):**
- Primary: Blue (#3B82F6)
- Secondary: Amber (#F59E0B)
- Success: Green (#10B981)
- Warning: Orange (#F97316)
- Error: Red (#EF4444)

**Components:**
- shadcn/ui (Radix UI primitives)
- Responsive containers (`layout-container`)
- Dark/light theme (next-themes)

---

## i18n & RTL

**Locales:** en, ar

**RTL Support:**
- Bidirectional layouts (mirrors for Arabic)
- Mixed content support
- Date/number localization
- Language toggle (persistent)

**URL Structure:**
```
/[lang]/path → /en/docs, /ar/docs
/[lang]/s/[school]/path → /en/s/demo/dashboard
```

---

## Testing Strategy

**Required:**
- Multi-tenant isolation (automated suite)
- Performance benchmarks (10K concurrent users)
- Security penetration (annual)
- Accessibility audits (quarterly, axe-core in CI/CD)

---

## References

- [Architecture](/docs/architecture)
- [Epic Breakdown](/docs/epics)
- [Pattern Documentation](/docs/pattern)
- Next.js 15 docs, Prisma 6 best practices, NextAuth v5

---

_Developer-focused PRD for Hogwarts school management platform. Focus on building, not marketing._
